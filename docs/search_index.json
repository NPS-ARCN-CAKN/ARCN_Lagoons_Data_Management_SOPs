[["index.html", "Arctic Lagoons Monitoring Data Management Standard Operating Procedures 1 Introduction", " Arctic Lagoons Monitoring Data Management Standard Operating Procedures Scott D. Miller Information Technology Specialist\\Data Manager National Park Service, Arctic Inventory and Monitoring Program 240 W. 5th Ave. Anchorage, Alaska 2025-01-31 1 Introduction This document contains the data management standard operating procedures (SOPs) for the National Park Service, Arctic Inventory and Monitoring Network’s Arctic Lagoons Monitoring program. These procedures were developed in 2024 when data management moved from a file-based system to a centralized, authoritative relational database (Microsoft SQL Server). The SOPs presented here are specific to data management and do not supercede any field procedures presented. Methods and background are published in Jones, T., Apsens, S., Miller, S., and Robards, M. 2018. Coastal lagoons vital signs monitoring protocol for the Arctic Network: Volume 1, report narrative, version 1.0. Natural Resource Report. NPS/ARCN/NRR—2018/1824. National Park Service. Fort Collins, Colorado. Data and published products are available through the NPS Data Store at https://irma.nps.gov/DataStore/Reference/Profile/2216893 "],["deliverables-schedule.html", "2 Deliverables Schedule", " 2 Deliverables Schedule Identifier Deliverable Format L01 GPS waypoint files GPS export format. Text file format. L02 Hydrosurveyor files Hydrosurveyor export format. Text file format. L03 Water Quality - Continuous EXO2 Sonde Probe data and calibration data files. Text file formats. L04 Water level - HOBO Level Logger HOBO Level Logger export format. Text file format. L05 Digital Photographs TIFF L06 Data from contracted lab(s) Formats as received. Text file format. L07 Chain of custody form PDF L08 Scanned field data forms PDF L09 Original paper data forms Paper data forms L10 Water Quality - Discrete CSV L11 Fish length data NA L12 Fish abundance data NA L13 Ponar NA L14 Fish otolith data NA L15 Mysids data file CSV LAG01 Field data Human and machine readable text file format. "],["deliverable-l03-water-quality---continuous.html", "3 Deliverable L03: Water Quality - Continuous", " 3 Deliverable L03: Water Quality - Continuous data management procedures to be written "],["deliverable-l10-water-quality---discrete.html", "4 Deliverable L10: Water Quality - Discrete 4.1 Exporting data from Deliverables L10 - Discrete water quality field data to the master database 4.2 Example: Export Lagoons from the L to the ARCN_Lagoons database using an R script 4.3 Quality control", " 4 Deliverable L10: Water Quality - Discrete 4.1 Exporting data from Deliverables L10 - Discrete water quality field data to the master database Lagoons monitoring data are delivered to the ARCN data manager as spreadsheets or text files. These should be labeled according to the Deliverables Schedule. 4.1.1 Prerequisites Access to the ARCN Lagoons monitoring shared network drive (O:\\Monitoring\\Vital Signs\\Lagoon Communities and Ecosystems). 4.1.2 Procedure Deliverables typically arrive as a spreadsheet (workbook) with multiple worksheets, or as multiple spreadsheets. If these files have not been named correctly according to the deliverables schedule then that is the first task. Open a file explorer and navigate to the ARCN Lagoons monitoring shared network drive (described above). Enter the \\Data directory If a directory does not exist, then create it using the following example: O:\\Monitoring\\Vital Signs\\Lagoon Communities and Ecosystems\\Data\\2024 Lagoons Sampling, replacing 2024 with the appropriate year. Create two subdirectories: \\Deliverables as received `Deliverables processing` The purpose of the former directory is to store the files in their unaltered state as they were received from the contractor. The latter directory is a workbench for processing the raw deliverables into well-documented and high quality formats suitable for archivale and export into the master ARCN_Lagoons database. Copy the raw deliverable files into the two directories created above. Compress (zip) the files in the \\Deliverables as received and set the attributes to ReadOnly so they may not be accidentally altered. Begin working on the raw deliverables in the \\Deliverables processing directory. Use the software of your choice to accomplish the following: Lagoon names are often misspelled. Consult the database’s Lagoons table for authoritative Lagoon names. Incorrectly named Lagoon attributes will be rejected by the database Check for Site name inconsistencies. Consult the database’s Sites table for authoritative Site names. Site names are often spelled differently for the same site, AK1 vs AK_1, for example. If the Lagoons and Site names are consistent with the database then the next step is to export the sampling events to the SamplingEvents database table. Create a single file for each deliverable that is labeled consistently with the deliverable identifier, the year and a description of the data they contain. Example: L10 2024 Lagoons Discrete Water Quality Data.csv or L12 2024 Lagoons Sampling Fish Counts.csv. 4.2 Example: Export Lagoons from the L to the ARCN_Lagoons database using an R script 4.2.1 Isolate the lagoons, check they exist, and insert them into the Lagoons table, if necessary # Load libraries library(tidyverse) ## ── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ── ## ✔ dplyr 1.1.4 ✔ readr 2.1.5 ## ✔ forcats 1.0.0 ✔ stringr 1.5.1 ## ✔ ggplot2 3.5.1 ✔ tibble 3.2.1 ## ✔ lubridate 1.9.4 ✔ tidyr 1.3.1 ## ✔ purrr 1.0.2 ## ── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ── ## ✖ dplyr::filter() masks stats::filter() ## ✖ dplyr::lag() masks stats::lag() ## ℹ Use the conflicted package (&lt;http://conflicted.r-lib.org/&gt;) to force all conflicts to become errors # Build up a path to the raw data deliverable file dir = r&#39;(O:\\Monitoring\\Vital Signs\\Lagoon Communities and Ecosystems\\Data\\2024 Lagoons Sampling\\Deliverables processing/)&#39; SourceFilename = r&#39;(2021-2024 WCS CAKR Coastal Lagoons Data Received 2024-07-31 From KFraley Processed for DB Ingestion.xlsx)&#39; Workbook = paste(dir,SourceFilename,sep=&quot;&quot;) Worksheet = &quot;Water Data 2024&quot; wq = readxl::read_excel(Workbook,Worksheet) wq = as.data.frame(wq) # Extract the unique Lagoon names from the data Lagoons = as.data.frame(wq %&gt;% distinct(Lagoon)) # Loop through the distinct Lagoon names and write SQL queries to see if they exist and, if they don&#39;t, insert them. # Copy the queries into SQL Server Management Studio and execute them. # Any SELECT queries returning zero records indicates that the Lagoon is missinf from the Lagoons table. Insert it using the INSERT query cat(&quot;-- Use the SELECT queries below to determine if the Lagoons in Deliverable L10 exist or not. These lagoons must exist to avoid database errors when inserting data later on. If a lagoon doesn&#39;t exist, check the spelling. If it still doesn&#39;t exist, use the relevant INSERT query to insert it.\\n&quot;) ## -- Use the SELECT queries below to determine if the Lagoons in Deliverable L10 exist or not. These lagoons must exist to avoid database errors when inserting data later on. If a lagoon doesn&#39;t exist, check the spelling. If it still doesn&#39;t exist, use the relevant INSERT query to insert it. for(i in 1:nrow(Lagoons)){ Lagoon=Lagoons[i,&#39;Lagoon&#39;] Sql = paste(&quot;SELECT * FROM Lagoons WHERE Lagoon=&#39;&quot;,Lagoon,&quot;&#39; -- INSERT INTO Lagoons(Lagoon)VALUES(&#39;&quot;,Lagoon,&quot;&#39;)\\n&quot;,sep=&quot;&quot;) cat(Sql) } ## SELECT * FROM Lagoons WHERE Lagoon=&#39;Aukulak&#39; -- INSERT INTO Lagoons(Lagoon)VALUES(&#39;Aukulak&#39;) ## SELECT * FROM Lagoons WHERE Lagoon=&#39;Krusenstern&#39; -- INSERT INTO Lagoons(Lagoon)VALUES(&#39;Krusenstern&#39;) ## SELECT * FROM Lagoons WHERE Lagoon=&#39;Kotlik&#39; -- INSERT INTO Lagoons(Lagoon)VALUES(&#39;Kotlik&#39;) ## SELECT * FROM Lagoons WHERE Lagoon=&#39;Tasaychek&#39; -- INSERT INTO Lagoons(Lagoon)VALUES(&#39;Tasaychek&#39;) ## SELECT * FROM Lagoons WHERE Lagoon=&#39;Atiligauraq&#39; -- INSERT INTO Lagoons(Lagoon)VALUES(&#39;Atiligauraq&#39;) 4.2.2 Isolate the distinct sampling events and insert them into the SamplingEvents table # Check that the field sites exist in the Sites database table. If the field sites do not exist in the database then those records will be rejected by the database. # This code writes to standard output a set of SELECT queries that can be executed against the database. If any SELECT queries return zero results, then you must INSERT the site using the accompanying INSERT query. # Get the unique lagoon/site combinations Sites = as.data.frame(wq %&gt;% distinct(Lagoon,Location)) for(i in 1:nrow(Sites)){ Lagoon=Sites[i,&#39;Lagoon&#39;] Site = Sites[i,&#39;Location&#39;] #Build a query Sql = paste(&quot;SELECT * FROM Sites WHERE Lagoon=&#39;&quot;,Lagoon,&quot;&#39; And Site=&#39;&quot;,Site,&quot;&#39;\\n -- INSERT INTO Sites(Lagoon,Site,SourceFile)VALUES(&#39;&quot;,Lagoon,&quot;&#39;,&#39;&quot;,Site,&quot;&#39;,&#39;&quot;,Workbook,&quot;&#39;)\\n&quot;,sep=&quot;&quot;) cat(Sql) } ## SELECT * FROM Sites WHERE Lagoon=&#39;Aukulak&#39; And Site=&#39;Outflow&#39; ## -- INSERT INTO Sites(Lagoon,Site,SourceFile)VALUES(&#39;Aukulak&#39;,&#39;Outflow&#39;,&#39;O:\\Monitoring\\Vital Signs\\Lagoon Communities and Ecosystems\\Data\\2024 Lagoons Sampling\\Deliverables processing/2021-2024 WCS CAKR Coastal Lagoons Data Received 2024-07-31 From KFraley Processed for DB Ingestion.xlsx&#39;) ## SELECT * FROM Sites WHERE Lagoon=&#39;Aukulak&#39; And Site=&#39;R1&#39; ## -- INSERT INTO Sites(Lagoon,Site,SourceFile)VALUES(&#39;Aukulak&#39;,&#39;R1&#39;,&#39;O:\\Monitoring\\Vital Signs\\Lagoon Communities and Ecosystems\\Data\\2024 Lagoons Sampling\\Deliverables processing/2021-2024 WCS CAKR Coastal Lagoons Data Received 2024-07-31 From KFraley Processed for DB Ingestion.xlsx&#39;) ## SELECT * FROM Sites WHERE Lagoon=&#39;Aukulak&#39; And Site=&#39;Center&#39; ## -- INSERT INTO Sites(Lagoon,Site,SourceFile)VALUES(&#39;Aukulak&#39;,&#39;Center&#39;,&#39;O:\\Monitoring\\Vital Signs\\Lagoon Communities and Ecosystems\\Data\\2024 Lagoons Sampling\\Deliverables processing/2021-2024 WCS CAKR Coastal Lagoons Data Received 2024-07-31 From KFraley Processed for DB Ingestion.xlsx&#39;) ## SELECT * FROM Sites WHERE Lagoon=&#39;Aukulak&#39; And Site=&#39;R3&#39; ## -- INSERT INTO Sites(Lagoon,Site,SourceFile)VALUES(&#39;Aukulak&#39;,&#39;R3&#39;,&#39;O:\\Monitoring\\Vital Signs\\Lagoon Communities and Ecosystems\\Data\\2024 Lagoons Sampling\\Deliverables processing/2021-2024 WCS CAKR Coastal Lagoons Data Received 2024-07-31 From KFraley Processed for DB Ingestion.xlsx&#39;) ## SELECT * FROM Sites WHERE Lagoon=&#39;Aukulak&#39; And Site=&#39;Inflow&#39; ## -- INSERT INTO Sites(Lagoon,Site,SourceFile)VALUES(&#39;Aukulak&#39;,&#39;Inflow&#39;,&#39;O:\\Monitoring\\Vital Signs\\Lagoon Communities and Ecosystems\\Data\\2024 Lagoons Sampling\\Deliverables processing/2021-2024 WCS CAKR Coastal Lagoons Data Received 2024-07-31 From KFraley Processed for DB Ingestion.xlsx&#39;) ## SELECT * FROM Sites WHERE Lagoon=&#39;Aukulak&#39; And Site=&#39;R2&#39; ## -- INSERT INTO Sites(Lagoon,Site,SourceFile)VALUES(&#39;Aukulak&#39;,&#39;R2&#39;,&#39;O:\\Monitoring\\Vital Signs\\Lagoon Communities and Ecosystems\\Data\\2024 Lagoons Sampling\\Deliverables processing/2021-2024 WCS CAKR Coastal Lagoons Data Received 2024-07-31 From KFraley Processed for DB Ingestion.xlsx&#39;) ## SELECT * FROM Sites WHERE Lagoon=&#39;Aukulak&#39; And Site=&#39;Marine edge&#39; ## -- INSERT INTO Sites(Lagoon,Site,SourceFile)VALUES(&#39;Aukulak&#39;,&#39;Marine edge&#39;,&#39;O:\\Monitoring\\Vital Signs\\Lagoon Communities and Ecosystems\\Data\\2024 Lagoons Sampling\\Deliverables processing/2021-2024 WCS CAKR Coastal Lagoons Data Received 2024-07-31 From KFraley Processed for DB Ingestion.xlsx&#39;) ## SELECT * FROM Sites WHERE Lagoon=&#39;Krusenstern&#39; And Site=&#39;R1&#39; ## -- INSERT INTO Sites(Lagoon,Site,SourceFile)VALUES(&#39;Krusenstern&#39;,&#39;R1&#39;,&#39;O:\\Monitoring\\Vital Signs\\Lagoon Communities and Ecosystems\\Data\\2024 Lagoons Sampling\\Deliverables processing/2021-2024 WCS CAKR Coastal Lagoons Data Received 2024-07-31 From KFraley Processed for DB Ingestion.xlsx&#39;) ## SELECT * FROM Sites WHERE Lagoon=&#39;Krusenstern&#39; And Site=&#39;Center&#39; ## -- INSERT INTO Sites(Lagoon,Site,SourceFile)VALUES(&#39;Krusenstern&#39;,&#39;Center&#39;,&#39;O:\\Monitoring\\Vital Signs\\Lagoon Communities and Ecosystems\\Data\\2024 Lagoons Sampling\\Deliverables processing/2021-2024 WCS CAKR Coastal Lagoons Data Received 2024-07-31 From KFraley Processed for DB Ingestion.xlsx&#39;) ## SELECT * FROM Sites WHERE Lagoon=&#39;Krusenstern&#39; And Site=&#39;R3&#39; ## -- INSERT INTO Sites(Lagoon,Site,SourceFile)VALUES(&#39;Krusenstern&#39;,&#39;R3&#39;,&#39;O:\\Monitoring\\Vital Signs\\Lagoon Communities and Ecosystems\\Data\\2024 Lagoons Sampling\\Deliverables processing/2021-2024 WCS CAKR Coastal Lagoons Data Received 2024-07-31 From KFraley Processed for DB Ingestion.xlsx&#39;) ## SELECT * FROM Sites WHERE Lagoon=&#39;Krusenstern&#39; And Site=&#39;R2&#39; ## -- INSERT INTO Sites(Lagoon,Site,SourceFile)VALUES(&#39;Krusenstern&#39;,&#39;R2&#39;,&#39;O:\\Monitoring\\Vital Signs\\Lagoon Communities and Ecosystems\\Data\\2024 Lagoons Sampling\\Deliverables processing/2021-2024 WCS CAKR Coastal Lagoons Data Received 2024-07-31 From KFraley Processed for DB Ingestion.xlsx&#39;) ## SELECT * FROM Sites WHERE Lagoon=&#39;Krusenstern&#39; And Site=&#39;Outflow&#39; ## -- INSERT INTO Sites(Lagoon,Site,SourceFile)VALUES(&#39;Krusenstern&#39;,&#39;Outflow&#39;,&#39;O:\\Monitoring\\Vital Signs\\Lagoon Communities and Ecosystems\\Data\\2024 Lagoons Sampling\\Deliverables processing/2021-2024 WCS CAKR Coastal Lagoons Data Received 2024-07-31 From KFraley Processed for DB Ingestion.xlsx&#39;) ## SELECT * FROM Sites WHERE Lagoon=&#39;Krusenstern&#39; And Site=&#39;Marine edge&#39; ## -- INSERT INTO Sites(Lagoon,Site,SourceFile)VALUES(&#39;Krusenstern&#39;,&#39;Marine edge&#39;,&#39;O:\\Monitoring\\Vital Signs\\Lagoon Communities and Ecosystems\\Data\\2024 Lagoons Sampling\\Deliverables processing/2021-2024 WCS CAKR Coastal Lagoons Data Received 2024-07-31 From KFraley Processed for DB Ingestion.xlsx&#39;) ## SELECT * FROM Sites WHERE Lagoon=&#39;Kotlik&#39; And Site=&#39;R3&#39; ## -- INSERT INTO Sites(Lagoon,Site,SourceFile)VALUES(&#39;Kotlik&#39;,&#39;R3&#39;,&#39;O:\\Monitoring\\Vital Signs\\Lagoon Communities and Ecosystems\\Data\\2024 Lagoons Sampling\\Deliverables processing/2021-2024 WCS CAKR Coastal Lagoons Data Received 2024-07-31 From KFraley Processed for DB Ingestion.xlsx&#39;) ## SELECT * FROM Sites WHERE Lagoon=&#39;Kotlik&#39; And Site=&#39;Inflow&#39; ## -- INSERT INTO Sites(Lagoon,Site,SourceFile)VALUES(&#39;Kotlik&#39;,&#39;Inflow&#39;,&#39;O:\\Monitoring\\Vital Signs\\Lagoon Communities and Ecosystems\\Data\\2024 Lagoons Sampling\\Deliverables processing/2021-2024 WCS CAKR Coastal Lagoons Data Received 2024-07-31 From KFraley Processed for DB Ingestion.xlsx&#39;) ## SELECT * FROM Sites WHERE Lagoon=&#39;Kotlik&#39; And Site=&#39;Outflow&#39; ## -- INSERT INTO Sites(Lagoon,Site,SourceFile)VALUES(&#39;Kotlik&#39;,&#39;Outflow&#39;,&#39;O:\\Monitoring\\Vital Signs\\Lagoon Communities and Ecosystems\\Data\\2024 Lagoons Sampling\\Deliverables processing/2021-2024 WCS CAKR Coastal Lagoons Data Received 2024-07-31 From KFraley Processed for DB Ingestion.xlsx&#39;) ## SELECT * FROM Sites WHERE Lagoon=&#39;Kotlik&#39; And Site=&#39;R2&#39; ## -- INSERT INTO Sites(Lagoon,Site,SourceFile)VALUES(&#39;Kotlik&#39;,&#39;R2&#39;,&#39;O:\\Monitoring\\Vital Signs\\Lagoon Communities and Ecosystems\\Data\\2024 Lagoons Sampling\\Deliverables processing/2021-2024 WCS CAKR Coastal Lagoons Data Received 2024-07-31 From KFraley Processed for DB Ingestion.xlsx&#39;) ## SELECT * FROM Sites WHERE Lagoon=&#39;Kotlik&#39; And Site=&#39;Center&#39; ## -- INSERT INTO Sites(Lagoon,Site,SourceFile)VALUES(&#39;Kotlik&#39;,&#39;Center&#39;,&#39;O:\\Monitoring\\Vital Signs\\Lagoon Communities and Ecosystems\\Data\\2024 Lagoons Sampling\\Deliverables processing/2021-2024 WCS CAKR Coastal Lagoons Data Received 2024-07-31 From KFraley Processed for DB Ingestion.xlsx&#39;) ## SELECT * FROM Sites WHERE Lagoon=&#39;Kotlik&#39; And Site=&#39;Marine edge&#39; ## -- INSERT INTO Sites(Lagoon,Site,SourceFile)VALUES(&#39;Kotlik&#39;,&#39;Marine edge&#39;,&#39;O:\\Monitoring\\Vital Signs\\Lagoon Communities and Ecosystems\\Data\\2024 Lagoons Sampling\\Deliverables processing/2021-2024 WCS CAKR Coastal Lagoons Data Received 2024-07-31 From KFraley Processed for DB Ingestion.xlsx&#39;) ## SELECT * FROM Sites WHERE Lagoon=&#39;Kotlik&#39; And Site=&#39;R1&#39; ## -- INSERT INTO Sites(Lagoon,Site,SourceFile)VALUES(&#39;Kotlik&#39;,&#39;R1&#39;,&#39;O:\\Monitoring\\Vital Signs\\Lagoon Communities and Ecosystems\\Data\\2024 Lagoons Sampling\\Deliverables processing/2021-2024 WCS CAKR Coastal Lagoons Data Received 2024-07-31 From KFraley Processed for DB Ingestion.xlsx&#39;) ## SELECT * FROM Sites WHERE Lagoon=&#39;Tasaychek&#39; And Site=&#39;Outflow&#39; ## -- INSERT INTO Sites(Lagoon,Site,SourceFile)VALUES(&#39;Tasaychek&#39;,&#39;Outflow&#39;,&#39;O:\\Monitoring\\Vital Signs\\Lagoon Communities and Ecosystems\\Data\\2024 Lagoons Sampling\\Deliverables processing/2021-2024 WCS CAKR Coastal Lagoons Data Received 2024-07-31 From KFraley Processed for DB Ingestion.xlsx&#39;) ## SELECT * FROM Sites WHERE Lagoon=&#39;Atiligauraq&#39; And Site=&#39;Outflow&#39; ## -- INSERT INTO Sites(Lagoon,Site,SourceFile)VALUES(&#39;Atiligauraq&#39;,&#39;Outflow&#39;,&#39;O:\\Monitoring\\Vital Signs\\Lagoon Communities and Ecosystems\\Data\\2024 Lagoons Sampling\\Deliverables processing/2021-2024 WCS CAKR Coastal Lagoons Data Received 2024-07-31 From KFraley Processed for DB Ingestion.xlsx&#39;) # The sites should all exist now 4.2.3 Insert the L10 Discrete Water Quality data into the database You may modify and use the R code above to generate insert queries to insert the discrete water quality data into the database, but it may be easier to use the SQL Server Management Studio’s Data Import/Export Wizard. Procedure Start SQL Server Management Studio Log into the ARCN_Lagoons database Right click the database and select Tasks -&gt; Import data… Step through the wizard to set the source file and destination database, paying particular attention to field mappings. Use the SSMS documentation as needed to transfer the data. 4.3 Quality control [to be written] "],["404.html", "Page not found", " Page not found The page you requested cannot be found (perhaps it was moved or renamed). You may want to try searching to find the page's new location, or use the table of contents to find the page you are looking for. "]]
